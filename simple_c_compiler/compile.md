Simple_c 简化原则

- [ ] 支持单、双、四、八字节的基本数据类型
- [ ] 数组 结构体
- [ ] 字符串
- [ ] 函数 局部变量 全局变量
- [ ] 条件语句 循环语句
- [ ] 基本运算

关键字

```
char、short、int、void、struct 数据类型
if、else、for、continue、break、return 控制语句
sizeof 类型长度计算
__cdecl ____stdcall 调用
__align 内存对齐
```

标识符 --- 变量名

```
<标识符> --> <非数字>{<数字>|<非数字>}
<非数字> --> '_'|'$'|a-z|A-Z
<数字> --> 0-9
```

整数常量

```
<整数常量> --> <非数字>{<数字>}
<数字> --> 0-9
```

字符常量

```
<字符常量> --> '<C-char>'
<C-char> --> <转义序列>|除' \ \n等
<转义序列> --> \' \" \\ \a \b \f \n \r \t \v
```

字符串常量

```
<字符串常量> --> "{<串字符>}"
<串字符> --> <转义序列>|除' \ \n等
<转义序列> --> \' \" \\ \a \b \f \n \r \t \v
```

运算符+分隔符

```
+ - * / % == != < <= > >= = '->' . & | ~ ^ ( ) { } [ ] ; , ...
约束: () {} []
```

注释

```
/* ...... */
// ......
```

#### 外部定义

```
<翻译单元> --> {<外部声明>}<文件结束符>
<外部声明> --> <函数定义>|<声明>
```

函数定义

```
<函数定义> --> <类型区分符><声明符><函数体>
<函数体> --> <复合语句>
```

声明

```
<声明> --> <类型区分符>[<初值声明符表>]<分号>
<初值声明符表> --> <初值声明符>{<逗号><初值声明符>}
<初值声明符> --> <声明符>|<声明符><赋值运算符'='><初值符>
```

类型区分符

```
<类型区分符> --> <数据类型>|<结构区分符>
<结构区分符> --> <struct关键字><标识符>'{'<结构声明表>'}'|<struct关键字><标识符>
<结构声明表> --> <结构声明>{<结构声明>}
<结构声明> --> <类型区分符>{<结构声明符表>}';'
<结构声明符表> --> <声明符>{','<声明符>}

约束: struct node {
	int value;
	struct node cur; 不合法
	struct node *next; 合法
}
```

声明符

```
<声明符> --> {<指针>}[<调用约定>][<结构成员对齐>]<直接声明符>
<调用约定> --> <__cdecl>|<__stdcall>
<结构成员对齐> --> <__align>'('<整数常量>')'
<指针> --> '*'
<直接声明符> --> <标识符><直接声明符后缀>
<直接声明符后缀> --> {'['']'|'['<整数常量>']'|'('')'|'('<形参表>')'}
<参数声明> --> <类型区分符><声明符>

约束: 调用约定作用于函数 结构成员对齐作用于结构成员
```

初值符

```
<初值符> --> <赋值表达式>
```



#### 语句

```
<语句> --> {<复合语句>|<if>|<for>|<while>|<break>|
					<continue>|<return>|<表达式语句>}
```

复合语句

```
<复合语句> --> '{' {<声明>}{<语句>} '}'
```

表达式语句/空语句

```
<表达式语句> --> [<expression>]';'

such as: xxxfunction(1,2,3);
```

选择语句

```
<if> --> 'if''('<表达式>')'<语句>['else'<语句>]

(1) if (表达式) 语句
(2) if (表达式) 语句1 else 语句2
(3) if (表达式) 语句1 else if (表达式2) 语句2 .... else 语句n 
```

循环语句

```
<for> --> 'for''('<表达式><表达式><表达式>')'<语句>
```

跳转语句

```
<continue> --> 'continue' ';'
<break> --> 'break' ';'
<return> --> 'return' <expression> ';'

约束: continue,break 只出现在循环体 
```

#### 表达式

```
<表达式> --> <赋值表达式>{','<赋值表达式>}
```

赋值表达式

```
<赋值表达式> --> <相等类表达式>|<一元表达式>'='<赋值表达式>
'=' 的左操作数为变量 即在内存中存在有地址
```

相等类表达式

```
<相等类表达式> --> <关系表达式>{'=='<关系表达式>|'!='<关系表达式>}

约束: 左 右
		算术类型  算术类型
		指针		 指针
```

关系表达式

```
<关系表达式> --> <加减类表达式>{'<'<加减类表达式>|'>'<加减类表达式>|'<='<加减类表达式>|'>='<加减类表达式>}
```

加减类表达式

```
<加减类表达式> --> <乘除类表达式>{'+'<乘除类表达式>|'-'<乘除类表达式>}
约束: 左 右
		算术类型  算术类型
		指针		 指针
		指针		 整型
```

乘除表达式

```
<乘除表达式> --> <一元表达式>{'*'<一元表达式>|'/'<一元表达式>|'%'<一元表达式>}
```

一元表达式

```
<一元表达式> --> <后缀表达式>|'&'<一元表达式>|'*'<一元表达式>|'+'<一元表达式>|'-'<一元表达式>|<sizeof表达式>
```

后缀表达式

```
<后缀表达式> --> <初等表达式>{'['<expression>']'|'('')'|'('<实参表达式>')'
|'.'IDENTIFIER|'->'IDENTIFIER}
<实参表达式> --> <赋值表达式>{','<赋值表达式>}
```

初等表达式

```
<初等表达式> --> <标识符>|<整数常量>|<字符串常量>|<字符常量>|(<表达式>)
```

关键字

```
simple支持的(暂时)       不支持的
char int short void    auto double long switch case enum typedef const float
struct if else for		 unsigned signed default goto
continue break return
sizeof __stdcall __align
__cdecl

```

#### Token

```
TK_PLUS 		'+'			TK_CINT  	整数
TK_MINUS 		'-'			TK_CCHAR 	char
TK_STAR 		'*'			TK_CSTR 	string
TK_DIVIDE		'/'			TK_EOF		end symbol
TK_MOD			'%'			KW_CHAR		"char" key word
TK_EQ				'=='		KW_SHORT
TK_NEQ			'!='		KW_INT
TK_LT				'<'			KW_VOID
TK_LEQ			'<='		KW_STRUCT
TK_GT				'>'			KW_IF
TK_GEQ			'>='		KW_ELSE
TK_ASSIGN		'='			KW_FOR
TK_POINTSTO	'->'		KW_CONTINUE
TK_DOT			'.'			KW_BREAK
TK_AND			'&'			KW_RETURN
TK_OPENPA		'('			KW_SIZEOF
TK_CLOSEPA	')'			KW_CDECL
TK_OPENBR		'['			KW_STDCALL
TK_CLOSEBR	']'			KW_ALIGN
TK_BEGIN		'{'			TK_IDENT
TK_END			'}'			TK_IDENT+1
TK_SEMICOLON';'				...
TK_COMMA		','			TK_IDENT+n
TK_ELLIPSIS '...'

```

